<nav aria-label="{{ i18n "menu.main_navigation" }}" role="navigation">
  <ul class="flex flex-col lg:flex-row lg:gap-x-12" role="menubar">
    {{ range .Site.Menus.main }}
      {{ if .HasChildren }}
        <li class="relative group" aria-haspopup="true" role="none">
          <button 
            class="flex items-center gap-x-1 text-sm font-semibold leading-6 text-neutral-900 dark:text-neutral-100 hover:text-primary-600 dark:hover:text-primary-400" 
            aria-expanded="false"
            aria-label='{{ i18n "menu.submenu_button" .Name }}'>
            {{ .Name }}
            {{ partial "icon.html" "chevron-down" }}
          </button>
          <ul class="absolute hidden group-hover:block lg:mt-2 lg:rounded-lg lg:shadow-lg lg:bg-white/95 lg:dark:bg-neutral-900/75" 
              role="menu" 
              aria-label='{{ i18n "menu.section_nav" .Name }}'
              aria-hidden="true">
            {{ range .Children }}
              <li role="none">
                <a href="{{ .URL }}" 
                   class="block px-4 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800" 
                   role="menuitem" 
                   aria-label='{{ i18n "menu.submenu_item" .Name $.Page.Parent.Title }}'>
                  {{ .Name }}
                </a>
              </li>
            {{ end }}
          </ul>
        </li>
      {{ else }}
        <li role="none">
          <a href="{{ .URL }}" 
             class="text-sm font-semibold leading-6 text-neutral-900 dark:text-neutral-100 hover:text-primary-600 dark:hover:text-primary-400" 
             role="menuitem"
             aria-label='{{ i18n "menu.main_section" .Name }}'>
            {{ .Name }}
          </a>
        </li>
      {{ end }}
    {{ end }}
  </ul>
</nav>
